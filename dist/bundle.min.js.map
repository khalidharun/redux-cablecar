{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///bundle.min.js","webpack:///webpack/bootstrap 77a9759d73f5ef988105","webpack:///./src/actions.js","webpack:///./src/middleware.js","webpack:///./src/cableCar.js","webpack:///./src/index.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","connect","ActionCable","url","type","cable","disconnect","subscribe","channel","params","unsubscribe","send","payload","_cableCar","_cableCar2","obj","default","car","middleware","store","next","action","_action$cable","newState","_classCallCheck","instance","Constructor","TypeError","_extends","assign","target","arguments","length","source","key","_createClass","defineProperties","props","descriptor","writable","protoProps","staticProps","CableCar","consumer","createConsumer","dispatch","undefined","_this","options","prefix","toUpperCase","subscription","subscriptions","create","initialized","connected","disconnected","received","data","rejected","Error","JSON","stringify","identifier","findAll","map","item","x","actions","_actions","newObj","_middleware","_middleware2"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReduxCableCar\"] = factory();\n\telse\n\t\troot[\"ReduxCableCar\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReduxCableCar\"] = factory();\n\telse\n\t\troot[\"ReduxCableCar\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nObject.defineProperty(exports,\"__esModule\",{value:true});exports.connect=connect;exports.\n\n\n\n\n\n\ndisconnect=disconnect;exports.\n\n\n\n\n\n\nsubscribe=subscribe;exports.\n\n\n\n\n\n\nunsubscribe=unsubscribe;exports.\n\n\n\n\n\n\nsend=send;function connect(ActionCable,url){return{type:'CABLE_CONNECT',cable:{ActionCable:ActionCable,url:url}};}function disconnect(){return{type:'CABLE_DISCONNECT',cable:{}};}function subscribe(channel,params){return{type:'CABLE_SUBSCRIBE',cable:{channel:channel,params:params}};}function unsubscribe(channel,params){return{type:'CABLE_UNSUBSCRIBE',cable:{channel:channel,params:params}};}function send(channel,params,payload){\nreturn{\ntype:'CABLE_SEND',\ncable:{channel:channel,params:params},\npayload:payload};\n\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nObject.defineProperty(exports,\"__esModule\",{value:true});var _cableCar=__webpack_require__(2);var _cableCar2=_interopRequireDefault(_cableCar);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}\n\nvar car=void 0;\n\nvar middleware=function middleware(store){return function(next){return function(action){\n\nswitch(action.type){\ncase'CABLE_CONNECT':var _action$cable=\naction.cable,ActionCable=_action$cable.ActionCable,url=_action$cable.url;\nnew _cableCar2.default(ActionCable,url,store);\nbreak;\ncase'CABLE_SUBSCRIBE':\ncar.subscribe(action.cable.channel,action.cable.params);\nbreak;\ncase'CABLE_UNSUBSCRIBE':\ncar.unsubscribe(action.cable.channel,action.cable.params);\nbreak;\ncase'CABLE_DISCONNECT':\ncar.disconnect();\ncar=null;\nbreak;\ncase'CABLE_SEND':\ncar.send(action.cable.channel,action.cable.params,action.payload);\ndefault:\nbreak;}\n\n\nvar newState=next(action);\n\nswitch(action.type){\ncase'CABLE_CONNECTED':\ncar=action.cable.car;\nbreak;\ndefault:\nbreak;}\n\n\nreturn newState;\n};};};\n\nmiddleware.connect=function(url,store){return new _cableCar2.default(url,store);};exports.default=\n\nmiddleware;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nObject.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}var CableCar=function(){\n\nfunction CableCar(ActionCable,url,store){_classCallCheck(this,CableCar);\nthis.store=store;\nthis.consumer=ActionCable.createConsumer(url);\nthis.store.dispatch({type:'CABLE_CONNECTED',cable:{car:this}});\n}_createClass(CableCar,[{key:'dispatch',value:function dispatch(\n\ntype,cable){var payload=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};\nvar action={\ntype:'CABLE_'+type,\ncable:cable,\npayload:payload};\n\nthis.store.dispatch(action);\n}},{key:'subscribe',value:function subscribe(\n\nchannel,params){var _this=this;\nvar options=_extends({channel:channel},params);\nvar prefix=channel.toUpperCase();\nthis.subscription=this.consumer.subscriptions.create(options,{\ninitialized:function initialized(){return _this.dispatch(prefix+'_INITIALIZED',options);},\nconnected:function connected(){return _this.dispatch(prefix+'_CONNECTED',options);},\ndisconnected:function disconnected(){return _this.dispatch(prefix+'_DISCONNECTED',options);},\nreceived:function received(data){return _this.dispatch(prefix+'_RECEIVED',options,data);},\nrejected:function rejected(){\n_this.dispatch(prefix+'_REJECTED',options);\nthrow new Error('ActionCable: Attempt to subscribe was rejected. ('+JSON.stringify(options)+')');\n}});\n\n}},{key:'send',value:function send(\n\nchannel,params,payload){\nvar options=_extends({channel:channel},params);\nvar identifier=JSON.stringify(options);\nvar subscriptions=this.consumer.subscriptions.findAll(identifier);\nsubscriptions.map(function(item){return item.send(payload);});\n}},{key:'unsubscribe',value:function unsubscribe(\n\nchannel,params){\nvar options=_extends({channel:channel},params);\nvar identifier=JSON.stringify(options);\nvar subscriptions=this.consumer.subscriptions.findAll(identifier);\nsubscriptions.map(function(x){return x.unsubscribe();});\n}},{key:'disconnect',value:function disconnect()\n\n{\nthis.consumer.disconnect();\nthis.store.dispatch({type:'CABLE_DISCONNECTED'});\n}}]);return CableCar;}();exports.default=\n\n\nCableCar;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nObject.defineProperty(exports,\"__esModule\",{value:true});exports.middleware=exports.actions=undefined;var _actions=__webpack_require__(0);var actions=_interopRequireWildcard(_actions);\nvar _middleware=__webpack_require__(1);var _middleware2=_interopRequireDefault(_middleware);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}exports.\n\nactions=actions;exports.middleware=_middleware2.default;exports.default=\n{actions:actions,middleware:_middleware2.default};\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// bundle.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 77a9759d73f5ef988105","export function connect(ActionCable, url) {\n  return {\n    type: 'CABLE_CONNECT',\n    cable: { ActionCable, url }\n  };\n}\n\nexport function disconnect() {\n  return {\n    type: 'CABLE_DISCONNECT',\n    cable: {}\n  };\n}\n\nexport function subscribe(channel, params) {\n  return {\n    type: 'CABLE_SUBSCRIBE',\n    cable: { channel, params }\n  };\n}\n\nexport function unsubscribe(channel, params) {\n  return {\n    type: 'CABLE_UNSUBSCRIBE',\n    cable: { channel, params }\n  };\n}\n\nexport function send(channel, params, payload) {\n  return {\n    type: 'CABLE_SEND',\n    cable: { channel, params },\n    payload\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions.js","import CableCar from './cableCar';\n\nlet car;\n\nconst middleware = store => next => (action) => {\n\n  switch (action.type) {\n    case 'CABLE_CONNECT':\n      const { ActionCable, url } = action.cable;\n      new CableCar(ActionCable, url, store);\n      break;\n    case 'CABLE_SUBSCRIBE':\n      car.subscribe(action.cable.channel, action.cable.params);\n      break;\n    case 'CABLE_UNSUBSCRIBE':\n      car.unsubscribe(action.cable.channel, action.cable.params);\n      break;\n    case 'CABLE_DISCONNECT':\n      car.disconnect();\n      car = null;\n      break;\n    case 'CABLE_SEND':\n      car.send(action.cable.channel, action.cable.params, action.payload);\n    default:\n      break;\n  }\n\n  const newState = next(action);\n\n  switch (action.type) {\n    case 'CABLE_CONNECTED':\n      car = action.cable.car;\n      break;\n    default:\n      break;\n  }\n\n  return newState;\n};\n\nmiddleware.connect = (url, store) => new CableCar(url, store);\n\nexport default middleware;\n\n\n\n// WEBPACK FOOTER //\n// ./src/middleware.js","class CableCar {\n\n  constructor(ActionCable, url, store) {\n    this.store = store;\n    this.consumer = ActionCable.createConsumer(url);\n    this.store.dispatch({ type: 'CABLE_CONNECTED', cable: { car: this } });\n  }\n\n  dispatch(type, cable, payload = {}) {\n    const action = {\n      type: `CABLE_${type}`,\n      cable,\n      payload,\n    };\n    this.store.dispatch(action);\n  }\n\n  subscribe(channel, params) {\n    const options = { channel , ...params};\n    const prefix = channel.toUpperCase();\n    this.subscription = this.consumer.subscriptions.create(options, {\n      initialized:  () => this.dispatch(`${prefix}_INITIALIZED`, options),\n      connected:    () => this.dispatch(`${prefix}_CONNECTED`, options),\n      disconnected: () => this.dispatch(`${prefix}_DISCONNECTED`, options),\n      received: (data) => this.dispatch(`${prefix}_RECEIVED`, options, data),\n      rejected:     () => {\n        this.dispatch(`${prefix}_REJECTED`, options);\n        throw new Error(`ActionCable: Attempt to subscribe was rejected. (${JSON.stringify(options)})`);\n      }\n    });\n  }\n\n  send(channel, params, payload) {\n    const options = { channel, ...params };\n    const identifier = JSON.stringify(options);\n    const subscriptions = this.consumer.subscriptions.findAll(identifier);\n    subscriptions.map(item => item.send(payload));\n  }\n\n  unsubscribe(channel, params) {\n    const options = { channel, ...params };\n    const identifier = JSON.stringify(options);\n    const subscriptions = this.consumer.subscriptions.findAll(identifier);\n    subscriptions.map( x => x.unsubscribe());\n  }\n\n  disconnect() {\n    this.consumer.disconnect();\n    this.store.dispatch({ type: 'CABLE_DISCONNECTED' });\n  }\n}\n\nexport default CableCar;\n\n\n\n// WEBPACK FOOTER //\n// ./src/cableCar.js","import * as actions from './actions';\nimport middleware from './middleware';\n\nexport { actions, middleware };\nexport default { actions, middleware };\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}